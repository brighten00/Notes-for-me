- [每天摸一個](http://linux.vbird.org/linux_basic/redhat6.1/linux_06command.php#more)
- [MySQL+PgSQL](https://github.com/zero85258/MyNOTE/blob/master/%E7%B6%B2%E8%B7%AF%E6%B4%A8%E9%AB%98%E6%89%8B/Back-End%E5%BE%8C%E7%AB%AF%20-%20%E5%84%B2%E5%AD%98MySQL%20&%20PgSQL.md) [Mongo](https://github.com/zero85258/MyNOTE/blob/master/%E7%B6%B2%E8%B7%AF%E6%B4%A8%E9%AB%98%E6%89%8B/Back-End%E5%BE%8C%E7%AB%AF%20-%20DB:MongoDB.md) [Redis](https://github.com/zero85258/MyNOTE/blob/master/%E7%B6%B2%E8%B7%AF%E6%B4%A8%E9%AB%98%E6%89%8B/Back-End%E5%BE%8C%E7%AB%AF%20-%20Redis.md) `mysql2pgsql`
- [Docker](https://github.com/zero85258/MyNOTE/blob/master/%E7%B6%B2%E8%B7%AF%E6%B4%A8%E9%AB%98%E6%89%8B/Back-End%E5%BE%8C%E7%AB%AF%20-%20%E8%99%9B%E6%93%AC%E5%8C%96Docker%20%E5%AE%B9%E5%99%A8.md), [VM](https://github.com/zero85258/MyNOTE/blob/master/%E7%B6%B2%E8%B7%AF%E6%B4%A8%E9%AB%98%E6%89%8B/Back-End%E5%BE%8C%E7%AB%AF%20-%20%E8%99%9B%E6%93%AC%E5%8C%96VM.md), [Git](https://github.com/zero85258/MyNOTE/blob/master/%E7%B6%B2%E8%B7%AF%E6%B4%A8%E9%AB%98%E6%89%8B/Misc%E5%A4%A7%E9%9B%9C%E7%87%B4%20-%20Git%20%E6%8C%87%E4%BB%A4.md), [Log](https://github.com/zero85258/MyNOTE/blob/master/%E7%B6%B2%E8%B7%AF%E6%B4%A8%E9%AB%98%E6%89%8B/Back-End%E5%BE%8C%E7%AB%AF%20-%20Monitor%20&&%20Log%20&&%20%E6%95%88%E8%83%BD.md)
- [亂七八糟的安裝指令](https://github.com/zero85258/MyNOTE/blob/master/%E7%B6%B2%E8%B7%AF%E6%B4%A8%E9%AB%98%E6%89%8B/%E6%A6%82%E5%BF%B5%20-%20%E4%BA%82%E4%B8%83%E5%85%AB%E7%B3%9F%E7%9A%84%E5%AE%89%E8%A3%9D%E6%8C%87%E4%BB%A4.md)
- [Http](https://github.com/zero85258/MyNOTE/blob/master/%E7%B6%B2%E8%B7%AF%E6%B4%A8%E9%AB%98%E6%89%8B/Back-End%E5%BE%8C%E7%AB%AF%20-%20HttpServer%20%26%20SSL%20%26%20%E9%80%A3%E7%B7%9A.md)
- [GNU Parallel process 多核平行方案](https://www.jianshu.com/p/c5a2369fa613), [多 queue 的查閱這](https://linux.cn/article-9718-1.html), [wait + bg 併發方案](https://blog.gtwang.org/programming/bash-tutorial-parallel-subprocesses-and-wait/)
- [Intergrate](https://github.com/zero85258/MyNOTE/blob/master/%E7%B6%B2%E8%B7%AF%E6%B4%A8%E9%AB%98%E6%89%8B/Ops%E7%B6%AD%E9%81%8B%20-%20%E8%AA%9E%E8%A8%80Intergate.md), [Adaptor](https://github.com/zero85258/MyNOTE/blob/master/%E7%B6%B2%E8%B7%AF%E6%B4%A8%E9%AB%98%E6%89%8B/Back-End%E5%BE%8C%E7%AB%AF%20-%20%E5%9F%BA%E7%A4%8E%E8%AA%9E%E6%B3%95Adaptor.md), [Go](https://github.com/zero85258/MyNOTE/blob/master/%E7%B6%B2%E8%B7%AF%E6%B4%A8%E9%AB%98%E6%89%8B/Back-End%E5%BE%8C%E7%AB%AF%20-%20%E5%9F%BA%E7%A4%8E%E8%AA%9E%E6%B3%95Golang.md), [Java](https://github.com/zero85258/MyNOTE/blob/master/%E7%B6%B2%E8%B7%AF%E6%B4%A8%E9%AB%98%E6%89%8B/Back-End%E5%BE%8C%E7%AB%AF%20-%20%E5%9F%BA%E7%A4%8E%E8%AA%9E%E6%B3%95Java.md), [PHP](https://github.com/zero85258/MyNOTE/blob/master/%E7%B6%B2%E8%B7%AF%E6%B4%A8%E9%AB%98%E6%89%8B/Back-End%E5%BE%8C%E7%AB%AF%20-%20%E5%9F%BA%E7%A4%8E%E8%AA%9E%E6%B3%95PHP.md), [Py](https://github.com/zero85258/MyNOTE/blob/master/%E7%B6%B2%E8%B7%AF%E6%B4%A8%E9%AB%98%E6%89%8B/Back-End%E5%BE%8C%E7%AB%AF%20-%20%E5%9F%BA%E7%A4%8E%E8%AA%9E%E6%B3%95Python.md),
- [expect 黑魔法](https://wirelessr.gitbooks.io/working-life/content/expectmiao_yong_wu_qiong.html) [nc 他的命](https://www.qa-knowhow.com/?p=3110)
- [Zenity](http://blogger.gtwang.org/2011/07/shell-script.html) 2,3 行撰寫 bashGUI
- [curlToFetch](https://kigiri.github.io/fetch/)
- gdb debugger

##### 待釐清

- /run/nginx.pid

##### 在外部下(非固化需求)

```sh
# ssh任務
ssh review ls
ssh centos@3.112.43.114 'bash -s' < 腳本.sh
ssh live-tf -T 'ls;ls;'

# docker
docker exec C_ata ls
docker exec -i C_db mysql ata < ~/Dump-2018-12-10.sql

# mysql
mysql -h $DB_HOST -u $DB_USERNAME -p $DB_PASSWORD -e "USE $DB_DATABASE;TRUNCATE TABLE jobs;TRUNCATE TABLE failed_jobs;"

# pgsql
psql -U username -d mydatabase -c 'SELECT * FROM mytable'

# mongo
mongoexport --host=127.0.0.1:27017 -d 資料庫名 -c 集合名 --type json --query='{"history.0.startTime":{"$gt":{"$date":"'2019-09-05'T00:00:00+08:00"},"$lte":{"$date":"'2019-09-06'T00:00:00+08:00"}}}' -o ~/輸出資料夾/data.json
mongoexport --host=127.0.0.1:27017 -d analytics -c conversion_data --type json --quiet --query='{"history.0.startTime":{"$gt":{"$date":"'2019-09-05'T00:00:00+08:00"},"$lte":{"$date":"'2019-09-06'T00:00:00+08:00"}}}' | less

# rabbitmq
rabbitmqadmin publish exchange=amq.default routing_key=test payload="hello, world" # pub

# redis
redis-cli keys '*'

# php
php -r "echo hash_hmac('sha256', 'a', 'gginin');"
php -f teeeesttt.php

# laravel (tinker其實就是psysh)
echo "\Illuminate\Support\Str::studly('foo_bar')" | vendor/bin/psysh

# python
python -c "import googleads as _; print(_.__path__)"

# JS
node -e "console.log('ggg')"

# Apple script
osascript -e 'display notification "通知内容" with title "标题" subtitle "子标题"'

# open chrome
open -na "Google Chrome" --args --new-window 127.0.0.1:10080 127.0.0.1:4040

# R語言
R -e 'install.packages(c("package1", "package2"))'

# Ansible
ansible 主機 -a "df -lh"
ansible-playbook playbook.yml
```

##### 位置,查看

```bash
pwd #當前位置
cd ~ #進入 家目錄
cd .
cd .. #回到 上層目錄
ls #列出 當前目錄包含哪些 文件,文件夾
ls -l #顯示ls + 細節
cat hello.c #讀取文件內容,顯示到"終端"
tac hello.txt #讀取文件內容,反向顯示到"終端"
less 檔案       #檔案查看; q離開
top #查看cpu,ram等等的(可裝htop)
history #查看過去下過的指令
pstree #查看process tree的狀況
netstat -ntlp #查看服務對應的port(看哪個process佔用port)
ss -ntlp # 查看開啟的port
lsof -i -P -n | grep LISTEN | grep IPv4 # port佔用情況
ps aux | grep 要找的 #通常是為了砍
ps aux | grep php-fpm | awk '{print $2}'
jobs -l #看背景執行的工作列表
git log | less #東西less化
curl 網址 | w3m -T text/html -dump # 東西 終端機 browser
tail -87 XXXXX.log #顯示檔案最後的87 行
tail -f XXXXX.log #持續顯示 有點像pm2 log
tail -n 10 XXXXX.log #
screen # linux 原生版的tmux (感覺可以搭配 nohup + watch 幹遍自動化的事)
zmore data.txt.gz . # 查看gzip、zip、compress壓縮文件
tree 資料夾名稱 #顯示樹狀結構
iostat # 查看io狀況
brctl show # 查看橋接的網卡
curl ifconfig.me #查看外網ip
ifconfig #查看內網ip(網卡)
dmesg # 查看kernal or 硬體log
chrome ./index.html # file:///C:/Users/User/index.html
comm aaa.txt bbb.txt -1 -2 # inner
feedgnuplot # 繪圖工具
telnet 192.168.0.1 8080 # 看有沒有ps在listen
soxi xxx.mp3 # 查看資訊
sox xxx.mp3 -n stats # 分析音訊
```

##### 複製,刪除,新增

```bash
rm abcd #刪除 文件abcd
cp -r hello1.c hello2.c #hello1.c複製一份,並命名為hello2.c
touch helloworld.c #建立helloworld.c文件
ln -s ~/Documents/Github Git #軟連結(就是M$的捷徑)
mv 檔名a 檔名b #既可以拿來複製 也可以重新命名
echo 'Hello World!' | pbcopy # 東西寫到剪貼簿
echo `pbpaste` # 取出剪貼簿
```

##### 執行,管線,併發等等

```bash
./helloworld.out # 執行helloworld.out文件
sh hello.sh # 執行hello.sh腳本
source ./.env # 其實也算種執行

./hello.out && ls   #執行hello.out,假如前者成立 就執行ls
./hello.out || ls   #執行hello.out,假如前者成立 就不執行ls
./hello.out >> hello.txt #把hello.c內容張貼到hello.txt(不覆蓋)
./hello.out > hello.txt   #把hello.c內容張貼到hello.txt(覆蓋)
./hello.out < hello.txt   #把hello.txt內容丟到hello.c執行

docker-compose up -d `類似子查詢` bash

ls | tee ls.txt #同時打印文字 + 導向到檔案
cat all9.txt | tee >(grep [pP]ython > python.txt) >(grep [Rr]uby > ruby.txt) # 多導向

# 背景執行, (異步,不阻塞畫面,某種程度來說就是靠processContextSwitch達到併發)
程式 &

# 讓程式登出session後可繼續執行
nohup 程式

# 監聽捶打,每 0.5 秒更新一次
watch -n 0.5 ls

# 很暴力的併發(%代表從管道傳來的參數)
ls | parallel -I% --max-args 1 要做的事 %
ls | xargs -I {} echo {}.ggg # 就是map函數

repeat 10 curl http://localhost:80/ # 打個10發

mkfifo 名稱 # 建pipe用的queue

{ echo "gginin" & echo "=====" & ls; } | less # stdout merge

eval $(pbpaste) | less # 有太長的指令要下(直接執行剪貼簿程式碼)
eval $(echo pbpaste) | osascript # 執行剪貼簿裡面的apple script

# 假如觸發以下sig 就echo TRAP! (有點event Driven的感覺)
trap "echo TRAP!!; exit" SIGTERM SIGINT SIGHUP

ps -ef | grep go #搜尋process
kill -9 [id] #程序的強制終止指令(暴力砍掉)

# 打印不出來時
ffprobe ysfu-liveAllTrim-program-song1.wav 2> >(grep -i Duration)
```

##### 查找檔案,其他

```bash
grep -E "(python|flask)" # regex
grep -n -E "\s+" # 正則表達式 -n並且加上行號
ls | grep -e "git" -e "re" # 找多個字
which 檔案 # 查看檔案路徑
find -name 檔案       #查看檔案路徑 (CentOS)
grep -r -n 'RedirectConversionData' *
bc <<< "2 ^ 20" # 複雜計算
cat 檔案.log | grep -A3 "Err" # 往下3行都找出

指令\             #指令太長換行
```

##### 安裝相關

```bash
dpkg --get-selections   #查看目前 已安裝的東西
sudo apt-get remove 東西  #解除安裝 東西
```

##### 防火牆

- [iptables](https://www.perturb.org/content/iptables-rules.html)

##### [壓縮相關](http://note.drx.tw/2008/04/command.html)

```bash
*.zip zip 程式壓縮的檔案；
*.gz gzip 程式壓縮的檔案；
*.bz2 bzip2 程式壓縮的檔案；
*.xz xz 程式壓縮的檔案；
*.tar       tar 程式打包的資料，(僅打包)並沒有壓縮過；
*.tar.gz   打包 + gzip 的壓縮
*.tar.bz2 打包 + bzip2 的壓縮
*.tar.xz 打包 + xz 的壓縮
```

##### 環境變量

```bash
vim ~/.bash_profile && source ~/.bash_profile # 編輯完要source ~/.bash_profile

# --- 範例 --------------------------------------
#bin通常底下放的是.sh執行檔
export PATH=$PATH:/usr/local/Cellar/php71/7.1.11_22/bin/:$HOME/.composer/vendor/bin
alias ll="ls -lah"
```

##### ssh(ssh 連線相關)

```bash

ssh-keygen # 產生ssh key
/.ssh/config

ssh-copy-id -i /公鑰路徑/id_rsa.pub root@127.128.128.128 # 把公鑰放到主機
```

##### ssl

```bash
# 產生ssl憑證
openssl req -new -x509 -days 365 -nodes -out 名稱.pem -keyout

# 下載 網站ssl憑證
true | openssl s_client -connect google.com:443 2>/dev/null | openssl x509

# 下載為PEM格式(也可以DER...等等格式)
true | openssl s_client -connect google.com:443 2>/dev/null | openssl x509 -outform PEM -out google.pem
```

##### 檔案 上傳下載同步

```bash
# 用scp 把東西從ec2 上傳下載
scp ssh名字:~/stg-20180328.sql ~/Desktop #下載
scp stg-20180328.sql ssh名字:~     #上傳

# rsync 差集更新
rsync -avzh /mypath/myfile.gz pi@192.168.1.12:/mybackup/
rsync -av /Data /s3bucket
rsync -rl --info=progress2 --stats ./node_modules/ public/node_modules #有詳細的進度條

# 樹狀outerJoin
rsync -a LEFT/ /outerJoin/ && rsync -a RIGHT/ /outerJoin/

# rclone(rsync雲端版)
rclone config
rclone sync /my/local/folder s3service:bucket-name
```

##### crontab(排程功能)

```bash
crontab -e # 查看排程列表(user的)
crontab -e # 編輯排程列表(user的)
/etc/crontab #(系統的)

#每分鐘執行
*/1 * * * * /bin/bash /home/ec2-user/check-services/checker.sh new-live.xxxxx-backend 172.31.4.247/fbg httpd > /dev/null 2>&1
```

##### 自動啟動項設定位置

```bash
/etc/rc.d/rc.local
```

##### 硬碟空間使用量 相關

```bash
du 檔案 #查看檔案大小
du -sh #查看當前目錄底下的大小
du -sh /var/www/html/center-control/* | sort -rn | head #查看指定目錄下的使用空間
du -sh ./* | sort -rn | head #查看當前目錄底下的使用空間
df #列出所有槽
df -h #列出所有槽

```

##### curl

```bash
curl -I http://localhost # 查看curl的結果Status

curl -X GET
```
